#!groovy
import uk.gov.hmcts.contino.AppPipelineDsl

@Library("Infrastructure")

def type = "java"
def product = "et"
def component = "sya-api"
def branchesToSync = ['perftest', 'demo', 'ithc']

withPipeline(type, product, component) {
  afterSuccess('smokeTest:preview') {
      sh "./gradlew integration"
    }
  disableLegacyDeployment()
  enablePactAs([AppPipelineDsl.PactRoles.CONSUMER])
  syncBranchesWithMaster(branchesToSync)
  enableSlackNotifications('#et-builds')
}
